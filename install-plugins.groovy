import jenkins.model.*
import hudson.model.*

def instance = Jenkins.getInstance()
def pluginManager = instance.getPluginManager()
def updateCenter = instance.getUpdateCenter()

def plugins = [
    "ionicons-api",
    "cloudbees-folder",
    "antisamy-markup-formatter",
    "asm-api",
    "json-path-api",
    "structs",
    "workflow-step-api",
    "token-macro",
    "build-timeout",
    "bouncycastle-api",
    "credentials",
    "plain-credentials",
    "variant",
    "ssh-credentials",
    "credentials-binding",
    "scm-api",
    "workflow-api",
    "commons-lang3-api",
    "timestamper",
    "caffeine-api",
    "script-security",
    "javax-activation-api",
    "jaxb",
    "snakeyaml-api",
    "json-api",
    "jackson2-api",
    "commons-text-api",
    "workflow-support",
    "plugin-util-api",
    "font-awesome-api",
    "bootstrap5-api",
    "jquery3-api",
    "echarts-api",
    "display-url-api",
    "checks-api",
    "junit",
    "matrix-project",
    "resource-disposer",
    "ws-cleanup",
    "ant",
    "okhttp-api",
    "durable-task",
    "workflow-durable-task-step",
    "workflow-scm-step",
    "workflow-cps",
    "workflow-job",
    "jakarta-activation-api",
    "jakarta-mail-api",
    "apache-httpcomponents-client-4-api",
    "instance-identity",
    "mailer",
    "workflow-basic-steps",
    "gradle",
    "pipeline-milestone-step",
    "pipeline-build-step",
    "pipeline-groovy-lib",
    "pipeline-stage-step",
    "joda-time-api",
    "pipeline-model-api",
    "pipeline-model-extensions",
    "branch-api",
    "workflow-multibranch",
    "pipeline-stage-tags-metadata",
    "pipeline-input-step",
    "pipeline-model-definition",
    "workflow-aggregator",
    "jjwt-api",
    "github-api",
    "mina-sshd-api-common",
    "mina-sshd-api-core",
    "gson-api",
    "git-client",
    "git",
    "github",
    "github-branch-source",
    "pipeline-github-lib",
    "pipeline-graph-analysis",
    "metrics",
    "pipeline-graph-view",
    "eddsa-api",
    "trilead-api",
    "ssh-slaves",
    "matrix-auth",
    "pam-auth",
    "ldap",
    "email-ext",
    "theme-manager",
    "dark-theme",
    "sonar",
    "config-file-provider",
    "javadoc",
    "jsch",
    "maven-plugin",
    "pipeline-maven-api",
    "pipeline-maven",
    "kubernetes-client-api",
    "authentication-tokens",
    "kubernetes-credentials",
    "kubernetes",
    "kubernetes-cli",
    "docker-commons",
    "docker-workflow"
]

plugins.each { plugin ->
    def installedPlugin = pluginManager.getPlugin(plugin)
    if (installedPlugin == null) {
        println "Installing plugin: ${plugin}"
        updateCenter.getPlugin(plugin)?.deploy()
    } else {
        println "Plugin ${plugin} is already installed."
    }
}

instance.save()
